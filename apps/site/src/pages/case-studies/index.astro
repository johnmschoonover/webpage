---
import BaseLayout from '@layouts/BaseLayout.astro';
import Card from '@components/Card.astro';
import Tag from '@components/Tag.astro';
import { getCollection } from 'astro:content';
const caseStudies = (await getCollection('case-studies')).sort((a, b) => a.data.order - b.data.order);
---
<BaseLayout pageHeading="Case Studies" description="Deep dives into platform programs, migrations, and resilience investments.">
  <div class="grid gap-6 md:grid-cols-2">
    {caseStudies.map((entry) => (
      <article class="flex flex-col gap-4 rounded-3xl border border-border bg-background/80 p-6" key={entry.id}>
        <div class="flex flex-wrap gap-2">
          {entry.data.tags.map((tag) => (
            <Tag label={tag} key={tag} />
          ))}
        </div>
        <h2 class="font-display text-2xl font-semibold text-foreground">{entry.data.title}</h2>
        <p class="text-sm uppercase tracking-[0.2em] text-muted-foreground">{entry.data.timeframe}</p>
        <p class="text-muted-foreground">{entry.data.description}</p>
        <Card eyebrow="Impact" title={entry.data.heroStat ?? 'Read the story'} description={entry.data.impact[0]} href={`/case-studies/${entry.slug}/`} cta="Read case study" />
      </article>
    ))}
  </div>
</BaseLayout>
